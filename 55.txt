由于传送文件夹是一件复杂且易错的功能，所以市面上多数软件并未提供此功能，因此很多人都只能选择将文件夹压缩成压缩文件再进行发送，不过这样用户在解压缩之前是看不到深层目录的内容的，而且不是每一台电脑都拥有压缩软件。为此本软件提供了下载浏览和下载文件夹的功能
当用户点击共享目录之后，界面线程会向网络线程发送信号，通知网络线程向服务器发送请求，同时会打开一个界面用来罗列共享目录下的文件和文件夹，并按照文件是属于文件还是文件夹来进行排序。
网络线程接收到界面线程的信号后，创建一个报文，并填写报文类型用以告知服务器这次请求的内容，发送报文之后等待数据到来。服务器接收到根目录文件请求后，将保存在内存的文件列表保存到一个字符串里发送给登录器的网络线程。登陆器的网络线程解析完毕后向群聊界面发送信号和数据，群聊界面收到消息后会转发给显示文件界面随后由显示界面排序后显示出来。为了给用户提供更灵活的操作，显示界面还有两个按钮分别提供下载和浏览其它文件夹的功能，当用户选择根目录下的一个文件夹之后，界面线程会重复之上操作，服务器会按照请求将文件信息打包后发送给登录器的网络线程，信息随后被转发给群聊界面，文件显示界面随后取代上次数据被显示出来。
当用户选择下载选项后，文件显示界面会先根据类型列的类型信息判断下载的是文件 还是文件夹，然后发送不同的消息给网络线程，与此同时会发送一个信号给群聊界面，群聊界面随后创建一个进度条显示下载进度。网络线程接收到下载请求后根据下载要求初始化发送列表后，将文件依次发送，每发送一个新文件会先发送一个特殊的报文里面记录这将要发送的文件的大小，位置等信息，供接登录器的网络线程创建新文件，随后将文件分块发送，客户端网络线程会将这些块按顺序存放到创建的文件里。每当发接收完成一个文件之后，网络线程会向群聊线程发送一个信号供后者刷更新进度条的进度。让当所有文件发送完成后,服务器会发送一个完成报文。客户端接收之后会通知群聊界面删除进度条


缓存还能再写 一次的接收完成之后，软件先判断缓存的前32位是否为报头标识，如果不是将缓存向前移动32位再次判断直到找到报头或者接收的数据少于32位。在找到报头之后，软件会根据报头记录的报文长度读取一个报文，如果数据不够，则继续接收不做处理。去除报文之后根据其中记录的报文类型，转发给不同函数进行处理，之后将报文之后的数据移动到缓存的开头进行报头判断。通过这种设计，本软件可以随时添加新的报文以提供新的功能只要添加新的报文标识处理函数就可以了



群聊界面出现之后在界面线程会开启一个5秒的计时器，当计时器结束后群聊界面会向数据库进行一次查询 获取在线用户并更新显示列表。

服务器
由于本软件有共享目录功能所以在启动软件的时候会提示用户选择共享目录，确认需要使用的共享目录之后服务器会将根目录的文件列表保存到内存，并显示在界面上。随后服务器会开启网络线程处理从不同客户端发来的请求。
当一个用户连接之后，服务器会将服务器中该用户的在线状态改为“在线”，然后为该用户开启一个异步的读写数据，当内核中将数据读进该用户特有的缓冲取后 该操作的回调函数将被调用，从而独立的处理不同用户的不同请求，最后发送一个信号给界面线程将该用户显示到界面的用户列表里。

健壮性
由于本软件给用户提供了大量的出入空间且使用了网络数据，所以由于错误信息而导致程序崩溃的概率也大大加大，对此本程序有一下设计
 在每个可能出错的函数的起始位添加参数检查，防止使用空参数和错误参数
 使用高可移植的语言和三方库，使得软件可以运行在不同环境下，使软件在平台下也是健壮的。
 针对部分高概率抛出异常的函数添加异常处理，增加程序的容错能力

























